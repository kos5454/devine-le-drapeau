<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Carte du Monde â€” Quiz GÃ©ographie</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsvectormap@1.5.3/dist/css/jsvectormap.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <script src="theme.js"></script>
  <style>
    *,*::before,*::after{box-sizing:border-box}
    body{margin:0;padding:0;font-family:'Inter',sans-serif;
      background:var(--bg);color:var(--text);height:100vh;overflow:hidden;}

    /* â”€â”€â”€ Ã‰CRANS PLEIN Ã‰CRAN â”€â”€â”€ */
    .fs-screen{
      position:fixed;inset:0;z-index:900;
      display:flex;align-items:center;justify-content:center;
      background:var(--bg);
    }
    .fs-screen.hidden{display:none!important;}

    /* â”€â”€â”€ CARD â”€â”€â”€ */
    .card{
      background:var(--bg-card);border:1px solid var(--border);
      border-radius:22px;padding:2.2rem 2rem;
      width:90%;max-width:440px;
      display:flex;flex-direction:column;gap:1.1rem;
      box-shadow:0 8px 40px rgba(0,0,0,.18);
    }
    .card-emoji{text-align:center;font-size:3rem;}
    .card-title{font-size:1.55rem;font-weight:800;text-align:center;color:var(--text)!important;}
    .card-title span{color:var(--accent)!important;}
    .card-sub{text-align:center;color:var(--text-secondary)!important;font-size:.92rem;}
    .score-big{text-align:center;font-size:2.4rem;font-weight:800;color:var(--text)!important;}
    .score-big small{font-size:1.1rem;font-weight:500;color:var(--text-secondary)!important;}
    .detail-text{text-align:center;color:var(--text-secondary)!important;font-size:.9rem;}

    /* â”€â”€â”€ BUTTONS â”€â”€â”€ */
    .btn{padding:.82rem;border-radius:12px;font-size:1rem;font-weight:700;
      border:none;cursor:pointer;font-family:'Inter',sans-serif;
      transition:opacity .18s,background .18s;width:100%;}
    .btn-primary{background:var(--accent)!important;color:#fff!important;}
    .btn-primary:hover{opacity:.88;}
    .btn-secondary{background:transparent!important;color:var(--text)!important;
      border:2px solid var(--border)!important;}
    .btn-secondary:hover{background:var(--border)!important;}
    .btn-ghost{background:none!important;border:none!important;color:var(--text-secondary)!important;
      font-size:.9rem;cursor:pointer;font-family:'Inter',sans-serif;padding:.4rem;}
    .btn-ghost:hover{color:var(--accent)!important;}

    /* â”€â”€â”€ SECTION LABEL â”€â”€â”€ */
    .section-lbl{font-size:.78rem;font-weight:700;color:var(--text-secondary)!important;
      text-transform:uppercase;letter-spacing:.06em;text-align:center;}

    /* â”€â”€â”€ CHIPS â”€â”€â”€ */
    .chip-row{display:flex;flex-wrap:wrap;gap:.45rem;justify-content:center;}
    .chip{
      padding:.38rem .82rem;border-radius:99px;
      border:2px solid var(--border);background:var(--bg);
      font-size:.82rem;font-weight:600;cursor:pointer;
      color:var(--text)!important;font-family:'Inter',sans-serif;
      transition:border-color .18s,background .18s,color .18s;
    }
    .chip:hover,.chip.on{
      border-color:var(--accent)!important;
      background:var(--accent-glow)!important;
      color:var(--accent)!important;
    }

    /* â”€â”€â”€ TOP BAR JEU â”€â”€â”€ */
    #topbar{
      position:fixed;top:0;left:0;right:0;z-index:800;
      padding:.55rem 1rem .4rem;background:var(--bg-card);
      border-bottom:1px solid var(--border);
      display:flex;flex-direction:column;gap:.25rem;
    }
    #topbar.hidden{display:none!important;}
    /* ligne 1 : badge | count | barre | score | âœ• */
    .tb-row1{display:flex;align-items:center;gap:.7rem;width:100%;}
    /* ligne 2 : question complÃ¨te */
    #tb-q{
      width:100%;font-size:.98rem;font-weight:700;
      color:var(--text)!important;text-align:center;
      padding:.15rem 0 .05rem;
      white-space:normal;word-break:break-word;
    }
    .tb-badge{background:var(--accent);color:#fff!important;font-size:.7rem;font-weight:700;
      padding:.2rem .6rem;border-radius:99px;white-space:nowrap;}
    #tb-count{font-size:.8rem;font-weight:600;color:var(--text-secondary)!important;white-space:nowrap;margin-left:auto;}
    .pbar-wrap{width:70px;height:5px;border-radius:99px;background:var(--border);overflow:hidden;flex-shrink:0;}
    #pbar{height:100%;border-radius:99px;background:var(--accent);transition:width .4s;}
    #tb-score{font-size:.88rem;font-weight:800;color:var(--accent)!important;white-space:nowrap;}
    #btn-quit{background:none;border:none;cursor:pointer;font-size:1.1rem;
      color:var(--text-secondary);padding:.2rem .4rem;border-radius:6px;flex-shrink:0;}
    #btn-quit:hover{color:#ef4444;}

    /* â”€â”€â”€ Ã‰CRAN CARTE â”€â”€â”€ */
    #game-screen{
      position:fixed;top:80px;left:0;right:0;bottom:0;z-index:700;
    }
    #game-screen.hidden{display:none!important;}
    #map{width:100%;height:100%;}

    /* â”€â”€â”€ FEEDBACK â”€â”€â”€ */
    #feedback{
      position:fixed;bottom:80px;left:50%;transform:translateX(-50%);
      z-index:1200;background:var(--bg-card);border-radius:16px;
      padding:.9rem 1.4rem;box-shadow:0 4px 24px rgba(0,0,0,.28);
      font-size:.95rem;font-weight:600;text-align:center;
      display:none;min-width:240px;max-width:340px;
      border:2px solid var(--border);color:var(--text)!important;
    }
    #feedback.ok{border-color:#22c55e!important;color:#22c55e!important;}
    #feedback.bad{border-color:#ef4444!important;color:#ef4444!important;}
    #fb-hint{font-size:.82rem;color:var(--text-secondary)!important;margin-top:.25rem;font-weight:500;}

    /* â”€â”€â”€ BTN NEXT â”€â”€â”€ */
    #btn-next{
      position:fixed;bottom:18px;left:50%;transform:translateX(-50%);
      z-index:1200;padding:.75rem 2.2rem;
      background:var(--accent);color:#fff;border:none;
      border-radius:14px;font-size:1rem;font-weight:700;
      cursor:pointer;font-family:'Inter',sans-serif;display:none;
    }
    #btn-next:hover{opacity:.9;}

    /* â”€â”€â”€ HIGHLIGHT PERSISTANT SILHOUETTE â”€â”€â”€ */
    /* !important garantit que le hover (style inline) ne l'emporte pas */
    #map [data-code].sil-target  { fill: #a855f7 !important; }
    #map [data-code].sil-correct { fill: #22c55e !important; }
    /* â”€â”€â”€ HIGHLIGHT PERSISTANT LOCALISER â”€â”€â”€ */
    #map [data-code].loc-correct { fill: #22c55e !important; }
    #map [data-code].loc-wrong   { fill: #ef4444 !important; }

    /* â”€â”€â”€ PANEL RÃ‰PONSES SILHOUETTE â”€â”€â”€ */
    #answer-panel{
      position:fixed;bottom:0;left:0;right:0;z-index:1100;
      background:var(--bg-card);border-top:1px solid var(--border);
      padding:.6rem .75rem .75rem;
    }
    #answer-grid{
      display:grid;grid-template-columns:1fr 1fr;gap:.5rem;
    }
    .ans-btn{
      padding:.7rem .4rem;border-radius:12px;font-size:.88rem;font-weight:700;
      border:2px solid var(--border);background:var(--bg);
      color:var(--text)!important;cursor:pointer;font-family:'Inter',sans-serif;
      transition:border-color .18s,background .18s,color .18s;
      line-height:1.25;text-align:center;
    }
    .ans-btn:hover:not(:disabled){
      border-color:var(--accent)!important;
      background:var(--accent-glow)!important;
      color:var(--accent)!important;
    }
    .ans-btn:disabled{cursor:default;opacity:.85;}
    .ans-btn.correct{border-color:#22c55e!important;background:#22c55e1a!important;color:#22c55e!important;}
    .ans-btn.wrong  {border-color:#ef4444!important;background:#ef44441a!important;color:#ef4444!important;}
    #btn-next-sil{
      display:none;width:100%;margin-top:.5rem;
      padding:.72rem;background:var(--accent);color:#fff;
      border:none;border-radius:12px;font-size:.95rem;font-weight:700;
      cursor:pointer;font-family:'Inter',sans-serif;
    }
    #btn-next-sil:hover{opacity:.9;}
    @media(max-width:500px){
      .ans-btn{font-size:.8rem;padding:.6rem .3rem;}
    }

    /* â”€â”€â”€ jsvectormap tweaks â”€â”€â”€ */
    .jvm-zoom-btn{color:#fff!important;}
    :root:not([data-theme="light"]) #map{background:#0d1627;}
    :root[data-theme="light"] #map{background:#c8d8f0;}

    @media(max-width:500px){
      #game-screen{top:80px;}
    }
  </style>
</head>
<body>
<button id="theme-toggle" class="theme-toggle" style="z-index:9999;" title="Changer de thÃ¨me">ğŸŒ™</button>

<!-- â•â•â• ACCUEIL â•â•â• -->
<div class="fs-screen" id="screen-home">
  <div class="card">
    <div class="card-emoji">ğŸ—ºï¸</div>
    <div class="card-title">Carte <span>du Monde</span></div>
    <div class="card-sub">Deux modes de jeu : localisez le pays ou devinez-le d'aprÃ¨s sa forme !</div>

    <div>
      <div class="section-lbl" style="margin-bottom:.45rem;">Mode</div>
      <div class="chip-row" id="mode-chips"></div>
    </div>

    <div>
      <div class="section-lbl" style="margin-bottom:.45rem;">RÃ©gion</div>
      <div class="chip-row" id="cont-chips"></div>
    </div>

    <div>
      <div class="section-lbl" style="margin-bottom:.45rem;">Questions</div>
      <div class="chip-row" id="q-chips"></div>
    </div>

    <button class="btn btn-primary" onclick="startGame()">C'est parti ! ğŸš€</button>
    <button class="btn btn-ghost" onclick="location.href='index.html'">â† Retour Ã  l'accueil</button>
  </div>
</div>

<!-- â•â•â• TOP BAR JEU â•â•â• -->
<div id="topbar" class="hidden">
  <div class="tb-row1">
    <span class="tb-badge">ğŸ—ºï¸ Carte</span>
    <span id="tb-count">0/0</span>
    <div class="pbar-wrap"><div id="pbar" style="width:0%"></div></div>
    <span id="tb-score">0 pts</span>
    <button id="btn-quit" onclick="goHome()" title="Quitter">âœ•</button>
  </div>
  <span id="tb-q">â€”</span>
</div>

<!-- â•â•â• Ã‰CRAN CARTE â•â•â• -->
<div id="game-screen" class="hidden">
  <div id="map"></div>
</div>

<!-- Feedback + btn suivant -->
<div id="feedback"><span id="fb-msg"></span><div id="fb-hint"></div></div>
<button id="btn-next" onclick="nextQuestion()">Question suivante â†’</button>

<!-- Panel rÃ©ponses Silhouette (cachÃ© par dÃ©faut) -->
<div id="answer-panel" style="display:none;">
  <div id="answer-grid"></div>
  <button id="btn-next-sil" onclick="nextQuestion()">Question suivante â†’</button>
</div>

<!-- â•â•â• RÃ‰SULTAT â•â•â• -->
<div class="fs-screen hidden" id="screen-result">
  <div class="card">
    <div class="card-emoji" id="res-emoji">ğŸ‰</div>
    <div class="card-title">RÃ©sultat</div>
    <div class="score-big"><span id="res-pts">0</span> <small>pts</small></div>
    <div class="score-big" style="font-size:1.4rem;margin-top:-.5rem;">
      <span id="res-correct">0</span> <small>/ <span id="res-total">10</span> correctes</small>
    </div>
    <div class="detail-text" id="res-detail">â€”</div>
    <button class="btn btn-primary" onclick="startGame()">Rejouer ğŸ”„</button>
    <button class="btn btn-secondary" onclick="goHome()">Changer de rÃ©glages</button>
    <button class="btn btn-ghost" onclick="location.href='index.html'">â† Retour Ã  l'accueil</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/jsvectormap@1.5.3/dist/js/jsvectormap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsvectormap@1.5.3/dist/maps/world.js"></script>
<script src="map.js"></script>
</body>
</html>
